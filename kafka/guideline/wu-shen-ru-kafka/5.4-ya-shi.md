# 压实

一般情况下，Kafka会根据设置的时间来保留数据，把超过时效的旧数据删除。

* **如果保留策略是**<mark style="color:blue;">**delete**</mark>**，那么早于保留时间的旧事件将被删除；**
* **如果保留策略是**<mark style="color:blue;">**compact**</mark>**（压实），那么只为每个键保留最新的值**。很显然，**只有当应用程序生成的事件里包含了键–值对时，设置compact才有意义**。如果主题中包含了null键，那么这个策略就会失效。

> 主题的数据保留策略也可以被设置成<mark style="color:blue;">**delete.and.compact**</mark>，也就是以上两种策略的组合。**超过保留时间的消息将被删除，即使它们的键对应的值是最新的**。
>
> **组合策略可以防止压实主题变得太大，同时也可以满足业务需要在一段时间后删除数据的要求。**
