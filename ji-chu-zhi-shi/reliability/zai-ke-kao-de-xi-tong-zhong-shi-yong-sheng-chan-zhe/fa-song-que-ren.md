# 发送确认

生产者可以选择以下3种确认模式：

* <mark style="color:blue;">**acks=0**</mark>：如果生产者能够通过网络把消息发送出去，那么就认为消息已成功写入Kafka。不过，在这种情况下仍然有可能出现错误，比如发送的消息对象无法被序列化或者网卡发生故障。如果此时分区离线、正在进行首领选举或整个集群长时间不可用，则并不会收到任何错误。**在 acks=0 模式下，生产延迟是很低的，但它对端到端延迟并不会带来任何改进（在消息被所有可用副本复制之前，消费者是看不到它们的）。**
* <mark style="color:blue;">**acks=1**</mark>：首领在收到消息并把它写入分区数据文件（不一定要冲刷到磁盘上）时会返回确认或错误响应。**在这种模式下，如果首领被关闭或发生崩溃，那么那些已经成功写入并确认但还没有被跟随者复制的消息就丢失了。**
* <mark style="color:blue;">**acks=all**</mark>：首领在返回确认或错误响应之前，会等待所有同步副本都收到消息。这个配置**可以和 min.insync.replicas 参数结合起来，用于控制在返回确认响应前至少要有多少个副本收到消息**。这是**最安全的选项，因为生产者会一直重试，直到消息提交成功**。
